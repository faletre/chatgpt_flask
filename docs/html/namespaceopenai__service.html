<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Flask-Chat: openai_service Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Flask-Chat
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">openai_service Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6e41e8e73b3f956d78cb2d573860d74b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenai__service.html#a6e41e8e73b3f956d78cb2d573860d74b">contar_tokens</a> (mensajes, modelo=&quot;gpt-3.5-turbo&quot;)</td></tr>
<tr class="memdesc:a6e41e8e73b3f956d78cb2d573860d74b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cuenta el número de tokens utilizados por un conjunto de mensajes.  <a href="namespaceopenai__service.html#a6e41e8e73b3f956d78cb2d573860d74b">More...</a><br /></td></tr>
<tr class="separator:a6e41e8e73b3f956d78cb2d573860d74b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca35d839d453220648871e34cfaaef7d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenai__service.html#aca35d839d453220648871e34cfaaef7d">obtener_respuesta_openai</a> (mensajes_historial, modelo)</td></tr>
<tr class="memdesc:aca35d839d453220648871e34cfaaef7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene la respuesta de OpenAI para un conjunto de mensajes.  <a href="namespaceopenai__service.html#aca35d839d453220648871e34cfaaef7d">More...</a><br /></td></tr>
<tr class="separator:aca35d839d453220648871e34cfaaef7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6615e23675b68115fb667d4b59d18fe7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenai__service.html#a6615e23675b68115fb667d4b59d18fe7">obtener_resumen_historial</a> (mensajes_historial)</td></tr>
<tr class="memdesc:a6615e23675b68115fb667d4b59d18fe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene un resumen del historial de mensajes.  <a href="namespaceopenai__service.html#a6615e23675b68115fb667d4b59d18fe7">More...</a><br /></td></tr>
<tr class="separator:a6615e23675b68115fb667d4b59d18fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a70651ad93f531b836bca3257d615c95e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenai__service.html#a70651ad93f531b836bca3257d615c95e">api_key</a></td></tr>
<tr class="separator:a70651ad93f531b836bca3257d615c95e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b14e488ae28d98d262453f3e9cd6e4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceopenai__service.html#a0b14e488ae28d98d262453f3e9cd6e4d">logger</a> = logging.getLogger(__name__)</td></tr>
<tr class="separator:a0b14e488ae28d98d262453f3e9cd6e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6e41e8e73b3f956d78cb2d573860d74b" name="a6e41e8e73b3f956d78cb2d573860d74b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e41e8e73b3f956d78cb2d573860d74b">&#9670;&nbsp;</a></span>contar_tokens()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def contar_tokens </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mensajes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>modelo</em> = <code>&quot;gpt-3.5-turbo&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cuenta el número de tokens utilizados por un conjunto de mensajes. </p>
<p >Esta función calcula el número de tokens necesarios para enviar un conjunto de mensajes a la API de OpenAI. El número de tokens es importante para determinar si se excede el límite de tokens del modelo. La función toma en cuenta el modelo utilizado, dado que la codificación y el número de tokens varían entre diferentes modelos.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mensajes</td><td>Lista de diccionarios que contienen el historial de mensajes. Cada mensaje debe tener un campo <code>content</code> con el contenido del mensaje.</td></tr>
    <tr><td class="paramname">modelo</td><td>Nombre del modelo de OpenAI que se utilizará para calcular los tokens (e.g., "gpt-3.5-turbo").</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>Integer que representa el número total de tokens utilizados por los mensajes.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>La función utiliza el paquete <code>tiktoken</code> para calcular los tokens de manera precisa.</dd></dl>
<div class="fragment"><div class="line">Ejemplo de uso:</div>
<div class="line">tokens = <a class="code hl_function" href="namespaceopenai__service.html#a6e41e8e73b3f956d78cb2d573860d74b">contar_tokens</a>(mensajes_historial, <span class="stringliteral">&quot;gpt-3.5-turbo&quot;</span>)</div>
<div class="ttc" id="anamespaceopenai__service_html_a6e41e8e73b3f956d78cb2d573860d74b"><div class="ttname"><a href="namespaceopenai__service.html#a6e41e8e73b3f956d78cb2d573860d74b">openai_service.contar_tokens</a></div><div class="ttdeci">def contar_tokens(mensajes, modelo=&quot;gpt-3.5-turbo&quot;)</div><div class="ttdoc">Cuenta el número de tokens utilizados por un conjunto de mensajes.</div><div class="ttdef"><b>Definition:</b> openai_service.py:88</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="aca35d839d453220648871e34cfaaef7d" name="aca35d839d453220648871e34cfaaef7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca35d839d453220648871e34cfaaef7d">&#9670;&nbsp;</a></span>obtener_respuesta_openai()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def obtener_respuesta_openai </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mensajes_historial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>modelo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene la respuesta de OpenAI para un conjunto de mensajes. </p>
<p >Esta función envía el historial de mensajes a la API de OpenAI para obtener una respuesta del modelo especificado. Se utiliza el modelo indicado para generar una respuesta basada en los mensajes previos. El parámetro <code>modelo</code> puede ser un modelo como <code>gpt-3.5-turbo</code> o <code>gpt-4</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mensajes_historial</td><td>Lista de diccionarios que contienen el historial de mensajes. Cada mensaje debe tener un campo <code>role</code> ('user' o 'assistant') y un campo <code>content</code> con el contenido del mensaje.</td></tr>
    <tr><td class="paramname">modelo</td><td>Nombre del modelo de OpenAI que se utilizará para generar la respuesta (e.g., "gpt-3.5-turbo").</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>String con la respuesta generada por el modelo de OpenAI.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Si ocurre un error al interactuar con la API de OpenAI, se registrará el error y se devolverá un mensaje indicando el fallo.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>La función realiza una solicitud a OpenAI usando el método <code>openai.chat.completions.create</code>, y tiene configurado un límite de tokens de 550.</dd></dl>
<div class="fragment"><div class="line">Ejemplo de uso:</div>
<div class="line">respuesta = <a class="code hl_function" href="namespaceopenai__service.html#aca35d839d453220648871e34cfaaef7d">obtener_respuesta_openai</a>(mensajes_historial, <span class="stringliteral">&quot;gpt-3.5-turbo&quot;</span>)</div>
<div class="ttc" id="anamespaceopenai__service_html_aca35d839d453220648871e34cfaaef7d"><div class="ttname"><a href="namespaceopenai__service.html#aca35d839d453220648871e34cfaaef7d">openai_service.obtener_respuesta_openai</a></div><div class="ttdeci">def obtener_respuesta_openai(mensajes_historial, modelo)</div><div class="ttdoc">Obtiene la respuesta de OpenAI para un conjunto de mensajes.</div><div class="ttdef"><b>Definition:</b> openai_service.py:10</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a6615e23675b68115fb667d4b59d18fe7" name="a6615e23675b68115fb667d4b59d18fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6615e23675b68115fb667d4b59d18fe7">&#9670;&nbsp;</a></span>obtener_resumen_historial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def obtener_resumen_historial </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mensajes_historial</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene un resumen del historial de mensajes. </p>
<p >Esta función envía el historial de mensajes a la API de OpenAI para obtener un resumen de los mensajes de manera concisa y clara. El resumen se realiza utilizando el modelo <code>gpt-3.5-turbo</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mensajes_historial</td><td>Lista de diccionarios que contienen el historial de mensajes. Cada mensaje debe tener un campo <code>role</code> ('user' o 'assistant') y un campo <code>content</code> con el contenido del mensaje.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>String con el resumen generado por el modelo de OpenAI.</li>
</ul>
</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>Si ocurre un error al interactuar con la API de OpenAI, se registrará el error y se devolverá un mensaje indicando el fallo.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>El modelo utilizado para resumir es <code>gpt-3.5-turbo</code> y tiene configurado un límite de tokens de 500.</dd></dl>
<div class="fragment"><div class="line">Ejemplo de uso:</div>
<div class="line">resumen = <a class="code hl_function" href="namespaceopenai__service.html#a6615e23675b68115fb667d4b59d18fe7">obtener_resumen_historial</a>(mensajes_historial)</div>
<div class="ttc" id="anamespaceopenai__service_html_a6615e23675b68115fb667d4b59d18fe7"><div class="ttname"><a href="namespaceopenai__service.html#a6615e23675b68115fb667d4b59d18fe7">openai_service.obtener_resumen_historial</a></div><div class="ttdeci">def obtener_resumen_historial(mensajes_historial)</div><div class="ttdoc">Obtiene un resumen del historial de mensajes.</div><div class="ttdef"><b>Definition:</b> openai_service.py:51</div></div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a70651ad93f531b836bca3257d615c95e" name="a70651ad93f531b836bca3257d615c95e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70651ad93f531b836bca3257d615c95e">&#9670;&nbsp;</a></span>api_key</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">api_key</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0b14e488ae28d98d262453f3e9cd6e4d" name="a0b14e488ae28d98d262453f3e9cd6e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b14e488ae28d98d262453f3e9cd6e4d">&#9670;&nbsp;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logger = logging.getLogger(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
